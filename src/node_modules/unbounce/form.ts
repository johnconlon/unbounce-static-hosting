export type UnbounceForm = HTMLFormElement;

// TODO: more robust
export function getForm() {
  return document.querySelector(".lp-pom-form form");
}

export function fill(formData: { [k: string]: string }, form: UnbounceForm) {
  // TODO: radio values
  // var $unbounceRadio = $unbounceForm.find("input[type=radio]");
  // $unbounceRadio.filter("[value='" + radioGroupValue + "']").attr("checked", true);
  Object.entries(formData).forEach(([key, value]) => {
    const field = form.getElementById(key) as HTMLInputElement;
    if (!field) {
      throw new Error(`Cannot fill field ${key}. Field doesn't exist.`);
    }
  });
}

export function submit(form: UnbounceForm) {
  // Submit the unbounce form
  $(form).submit();
}
